(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f1b8222"],{"4f80":function(e,r,t){},"7cec":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("CheckSchedule"),t("div",{staticClass:"container"},[t("div",{staticClass:"checkInfoMain row"},[t("div",{staticClass:"col-12 col-md-5 pb-3 pl-md-0"},[t("div",{staticClass:"mainleft"},[t("p",{staticClass:"h4 py-3"},[e._v("購物清單：")]),e._l(e.cart.carts,(function(r,a){return t("div",{key:a},[r.product?t("div",{staticClass:"py-2 row bagInfo"},[t("img",{staticClass:"pr-md-0 col-5",attrs:{src:r.product.imageUrl,alt:r.product.title}}),t("div",{staticClass:"d-inline col pr-md-0"},[t("p",{staticClass:"pb-1"},[e._v(e._s(r.product.title))]),t("p",{staticClass:"pb-1"},[e._v(e._s(r.size))]),t("p",{staticClass:"pb-1"},[e._v("價格:"+e._s(e._f("currency")(r.product.price)))]),t("p",{staticClass:"pb-1"},[e._v("數量: "+e._s(r.qty))])])]):e._e()])})),t("div",{staticClass:"h6 total"},[e._v("總價(含運):"+e._s(e._f("currency")(e.cart.total+80)))])],2)]),t("form",{staticClass:"col-12 col-md",on:{submit:function(r){return r.preventDefault(),e.createOrder(r)}}},[t("div",{staticClass:"mainInfo"},[t("h4",{staticClass:"h4 py-3"},[e._v("訂購資料")]),t("div",[t("label",{staticClass:"py-3",attrs:{for:"userName"}},[e._v("收件人姓名*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col form-control",class:{"is-invalid":e.errors.has("name"),inputBorder:!e.errors.has("name")},attrs:{placeholder:"姓名",type:"text",id:"userName",name:"name"},domProps:{value:e.form.user.name},on:{input:function(r){r.target.composing||e.$set(e.form.user,"name",r.target.value)}}}),e.errors.has("name")?t("span",{staticClass:"text-danger mt-2 d-block"},[e._v("請輸入姓名*")]):e._e()]),t("div",[t("label",{staticClass:"py-3",attrs:{for:"userPhone"}},[e._v("收件人手機*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required|digits:10",expression:"'required|digits:10'"}],staticClass:"col form-control",class:{"is-invalid":e.errors.has("tel"),inputBorder:!e.errors.has("tel")},attrs:{placeholder:"號碼",type:"tel",onkeyup:"value=value.replace(/[^\\d]/g,'') ",id:"userPhone",name:"tel"},domProps:{value:e.form.user.tel},on:{input:function(r){r.target.composing||e.$set(e.form.user,"tel",r.target.value)}}}),e.errors.has("tel")?t("span",{staticClass:"text-danger mt-2 d-block"},[e._v("請輸入手機10碼")]):e._e()]),t("div",[t("label",{staticClass:"py-3",attrs:{for:"userEmail"}},[e._v("聯絡信箱*")]),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("email"),inputBorder:!e.errors.has("email")},attrs:{placeholder:"Email",type:"email",id:"userEmail",name:"email"}}),e.errors.has("email")?t("span",{staticClass:"text-danger mt-2 d-block"},[e._v("請輸入正確格式Email")]):e._e()]),t("div",[t("label",{staticClass:"py-3"},[e._v("運送方式*")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.user.ship,expression:"form.user.ship"}],staticClass:"form-control",attrs:{id:"ship"},on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form.user,"ship",r.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"home"}},[e._v("宅配到府")]),t("option",{attrs:{value:"fm"}},[e._v("全家門市取貨服務")]),t("option",{attrs:{value:"711"}},[e._v("7-11門市取貨服務")])])]),t("div",["home"===e.form.user.ship?t("div",[t("label",{staticClass:"py-3",attrs:{for:"address"}},[e._v("收件人地址*")]),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("address"),inputBorder:!e.errors.has("address")},attrs:{id:"address",name:"address",type:"text",placeholder:"請輸入收件人地址"},domProps:{value:e.form.user.address},on:{input:function(r){r.target.composing||e.$set(e.form.user,"address",r.target.value)}}})]):e._e(),"fm"===e.form.user.ship?t("div",[t("label",{staticClass:"py-3",attrs:{for:"address"}},[e._v("全家超商門市*")]),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("address"),inputBorder:!e.errors.has("address")},attrs:{id:"address",name:"address",type:"text",placeholder:"全家門市地址"},domProps:{value:e.form.user.address},on:{input:function(r){r.target.composing||e.$set(e.form.user,"address",r.target.value)}}})]):e._e(),"711"===e.form.user.ship?t("div",[t("label",{staticClass:"py-3",attrs:{for:"address"}},[e._v("711超商門市*")]),t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("address"),inputBorder:!e.errors.has("address")},attrs:{id:"address",name:"address",type:"text",placeholder:"711門市地址"},domProps:{value:e.form.user.address},on:{input:function(r){r.target.composing||e.$set(e.form.user,"address",r.target.value)}}})]):e._e(),e.errors.has("address")?t("span",{staticClass:"text-danger mt-2 d-block"},[e._v("請輸入正確地址")]):e._e()]),t("div",[t("label",{staticClass:"py-3"},[e._v("付款方式*")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.user.payMethod,expression:"form.user.payMethod"}],staticClass:"form-control",attrs:{id:"payMethod"},on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form.user,"payMethod",r.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"delivery"}},[e._v("貨到付款")]),t("option",{attrs:{value:"credit"}},[e._v("信用卡付款")])])]),"credit"===e.form.user.payMethod?t("div",[t("div",{staticClass:"row align-items-center"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"py-2"},[t("label",{staticClass:"pb-2 col px-0",attrs:{for:""}},[e._v("信用卡卡號*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.user.card.number,expression:"form.user.card.number"}],staticClass:"col",class:{"form-control is-invalid":!e.isCardNumber,inputBorder:e.isCardNumber},attrs:{type:"text",placeholder:"請輸入十六位數值之信用卡卡號",name:"",maxlength:"16"},domProps:{value:e.form.user.card.number},on:{focus:function(r){r.preventDefault(),e.isFlipped=!0},input:[function(r){r.target.composing||e.$set(e.form.user.card,"number",r.target.value)},function(r){return r.preventDefault(),e.inputCardNumner()}],change:function(r){return r.preventDefault(),e.checkCardNumber()}}}),e.isCardNumber?e._e():t("div",{staticClass:"text-danger mt-2 d-block"},[e._v("請輸入正確信用卡卡號")])]),t("div",{staticClass:"py-2"},[t("label",{staticClass:"pb-2 col px-0",attrs:{for:""}},[e._v("卡片到期日*")]),t("div",{staticClass:"row px-3"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.user.card.date.month,expression:"form.user.card.date.month"}],staticClass:"form-control col mr-1",class:{borderErr:!e.isCardMonth},on:{focus:function(r){r.preventDefault(),e.isFlipped=!0},change:[function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form.user.card.date,"month",r.target.multiple?t:t[0])},function(r){return r.preventDefault(),e.checkCardMonth()}]}},[t("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("月份")]),t("option",{attrs:{value:"01"}},[e._v("一月")]),t("option",{attrs:{value:"02"}},[e._v("二月")]),t("option",{attrs:{value:"03"}},[e._v("三月")]),t("option",{attrs:{value:"04"}},[e._v("四月")]),t("option",{attrs:{value:"05"}},[e._v("五月")]),t("option",{attrs:{value:"06"}},[e._v("六月")]),t("option",{attrs:{value:"07"}},[e._v("七月")]),t("option",{attrs:{value:"08"}},[e._v("八月")]),t("option",{attrs:{value:"09"}},[e._v("九月")]),t("option",{attrs:{value:"10"}},[e._v("十月")]),t("option",{attrs:{value:"11"}},[e._v("十一月")]),t("option",{attrs:{value:"12"}},[e._v("十二月")])]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.user.card.date.year,expression:"form.user.card.date.year"}],staticClass:"form-control col",class:{borderErr:!e.isCardYear},on:{focus:function(r){r.preventDefault(),e.isFlipped=!0},change:[function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.form.user.card.date,"year",r.target.multiple?t:t[0])},function(r){return r.preventDefault(),e.checkCardYear()}]}},[t("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("年分")]),e._l(15,(function(r,a){return t("option",{key:a,domProps:{value:2018+r}},[e._v(e._s(2018+r))])}))],2)]),e.isCardMonth&&e.isCardYear?e._e():t("div",{staticClass:"text-danger mt-2 d-block"},[e._v("請選擇卡片到期日")])]),t("div",{staticClass:"py-2"},[t("label",{staticClass:"pb-2 col px-0",attrs:{for:""}},[e._v("卡片檢查碼*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.user.card.ccv,expression:"form.user.card.ccv"}],staticClass:"col",class:{"form-control is-invalid":!e.isCardCcv,inputBorder:e.isCardCcv},attrs:{type:"text",placeholder:"卡片背面後三碼",maxlength:"3"},domProps:{value:e.form.user.card.ccv},on:{focus:function(r){r.preventDefault(),e.isFlipped=!1},input:[function(r){r.target.composing||e.$set(e.form.user.card,"ccv",r.target.value)},function(r){return r.preventDefault(),e.inputCardCcv()}],change:function(r){return r.preventDefault(),e.checkCardCcv()}}}),e.isCardCcv?e._e():t("div",{staticClass:"text-danger mt-2 d-block"},[e._v("請輸入正確檢查碼")])])]),t("div",{staticClass:"col-12"},[t("div",{staticClass:"indexCard",class:{rotateBack:!1===e.isFlipped}},[t("div",{staticClass:"cardFront"},[t("div",{staticClass:"number"},[e._v(e._s(e.form.user.card.number.replace(/(\d{4}-?)(\d{4}-?)(\d{4}-?)(\d{4})/g,"$1-$2-$3-$4")))]),t("div",{staticClass:"date"},[e._v(e._s(e.form.user.card.date.month)+"/"+e._s(e.form.user.card.date.year))]),t("img",{staticClass:"pt-3",attrs:{src:e.card,alt:"信用卡"}})]),t("div",{staticClass:"cardBack"},[t("div",{staticClass:"ccv"},[e._v(e._s(e.form.user.card.ccv))]),t("img",{staticClass:"pt-3",attrs:{src:e.cardBg,alt:"信用卡"}})])])])])]):e._e()]),e._m(0),t("button",{staticClass:"CheckOut mb-4"},[e._v("前往結帳")])])])])],1)},s=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"mainInfo my-3 col-12 col-md"},[t("label",{staticClass:"py-3",attrs:{for:"comment"}},[e._v("備註")]),t("textarea",{staticClass:"col-12 mt-1",attrs:{id:"comment"}})])}],o=(t("a4d3"),t("99af"),t("4de4"),t("4160"),t("e439"),t("dbb4"),t("b64b"),t("ac1f"),t("5319"),t("159b"),t("ade3")),i=t("9352"),c=t.p+"img/card_bg.7745a583.png",n=t.p+"img/card_back_bg.cd4bf13c.png",d=t("2f62");function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){Object(o["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m={components:{CheckSchedule:i["a"]},data:function(){return{card:c,cardBg:n,isFlipped:!0,isCardNumber:Boolean,isCardMonth:Boolean,isCardYear:Boolean,isCardCcv:Boolean,form:{user:{name:"",tel:"",email:"",ship:"home",address:"",payMethod:"delivery",card:{number:"",date:{month:"",year:""},ccv:""},nowDate:""},message:""}}},methods:u({},Object(d["b"])("cartsModules",["getCart"]),{inputCardNumner:function(){var e=this;e.form.user.card.number=e.form.user.card.number.replace(/[a-z\W]/gi,""),e.checkCardNumber()},checkCardNumber:function(){var e=this;e.isCardNumber=!1,/^[0-9]{16}$/g.test(e.form.user.card.number)&&(e.isCardNumber=!0)},checkCardMonth:function(){var e=this;""!==e.form.user.card.date.month&&(e.isCardMonth=!0)},checkCardYear:function(){var e=this;""!==e.form.user.card.date.year&&(e.isCardYear=!0)},inputCardCcv:function(){var e=this;e.form.user.card.ccv=e.form.user.card.ccv.replace(/[a-z\W]/gi,""),e.checkCardCcv()},checkCardCcv:function(){var e=this;e.isCardCcv=!1,/^[0-9]{3}$/g.test(e.form.user.card.ccv)&&(e.isCardCcv=!0)},createOrder:function(){var e=this,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("lovfee","/order"),t=e.form,a=new Date,s=a.getFullYear(),o=a.getMonth(),i=a.getDate();e.form.user.nowDate="".concat(s,"/").concat(o+1,"/").concat(i),e.$store.dispatch("updateLoading",!0),"credit"===e.form.user.payMethod&&(/^[0-9]{16}$/g.test(e.form.user.card.number)||(e.isCardNumber=!1),""===e.form.user.card.date.month&&(e.isCardMonth=!1),""===e.form.user.card.date.year&&(e.isCardYear=!1),/^[0-9]{3}$/g.test(e.form.user.card.ccv)||(e.isCardCcv=!1)),e.$validator.validate().then((function(a){a?e.$http.post(r,{data:t}).then((function(r){r.data.success?e.$router.push("/confirm/".concat(r.data.orderId)):alert(r.data.message),e.$store.dispatch("updateLoading",!1)})):(window.scrollTo({top:0,behavior:"smooth"}),e.$store.dispatch("updateLoading",!1))}))}}),computed:u({},Object(d["c"])(["isLoading"]),{},Object(d["c"])("cartsModules",["cart"])),created:function(){var e=this;e.getCart()},mounted:function(){document.querySelector(".checkInfo").style="border:3px solid #8d3742",document.querySelector(".checkInfo>i").style="color:#8d3742",document.querySelector(".checkInfo>p").style="color:#8d3742",document.querySelector(".checkSchedule>span").classList.add("scheduleInfoAnimation")}},v=m,p=(t("9ab4"),t("2877")),f=Object(p["a"])(v,a,s,!1,null,null,null);r["default"]=f.exports},"9ab4":function(e,r,t){"use strict";var a=t("4f80"),s=t.n(a);s.a}}]);
//# sourceMappingURL=chunk-9f1b8222.7ffb03c7.js.map