(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69318a92"],{"0fd1":function(t,e,s){"use strict";e["a"]=s.p+"img/barcode.eeb8dcfa.jpg"},4807:function(t,e,s){"use strict";var c=s("6add"),a=s.n(c);a.a},"6add":function(t,e,s){},"752c":function(t,e,s){"use strict";s.r(e);var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("CheckSchedule"),s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),s("div",{staticClass:"container mt-3"},[""!=t.cart.carts?s("div",{staticClass:"checkProduct main row mb-3 mb-sm-5"},[s("div",{staticClass:"col-md-8 p-0 pr-md-3"},[t._m(0),t._l(t.cart.carts,(function(e,c){return s("div",{key:c,staticClass:"bagInfo text-center",class:{sale:t.couponSuccess}},[s("swiper",{attrs:{options:t.swiperOption}},[s("swiper-slide",[e.product?s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col"},[s("img",{attrs:{src:e.product.imageUrl,alt:e.product.title}}),s("p",{staticClass:"text-left"},[t._v(t._s(e.product.title))])]),s("div",{staticClass:"col"},[t._v(t._s(e.size))]),s("div",{staticClass:"col"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.qty,expression:"item.qty"}],on:{change:[function(s){var c=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"qty",s.target.multiple?c:c[0])},function(s){return s.preventDefault(),t.changeCartFn(e.id,e.product.id,e.qty,e.size)}]}},t._l(10,(function(e){return s("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e))])})),0)]),s("div",{staticClass:"col"},[t._v(t._s(t._f("currency")(e.product.price)))]),!1===t.slideDeleteFn?s("div",{staticClass:"col cartDelete",on:{click:function(s){return s.preventDefault(),t.cartItemDelete(e)}}},[s("button",[s("i",{staticClass:"fa fa-times"})])]):t._e()]):t._e()]),t.slideDeleteFn?s("swiper-slide",{staticClass:"swiperDelete"},[s("div",{staticClass:"cartDelete",on:{click:function(s){return s.preventDefault(),t.cartItemDelete(e)}}},[s("button",[s("i",{staticClass:"fa fa-times"})])])]):t._e()],1)],1)}))],2),s("div",{staticClass:"priceInfo col-md-4 py-3"},[t._m(1),s("table",{staticClass:"w-100"},[s("tr",[s("th",{staticClass:"pb-4"},[t._v("小計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.couponSuccess?s("tr",{staticClass:"text-success"},[s("th",{staticClass:"pb-4"},[t._v("折扣價")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e(),t._m(2)]),s("table",{staticClass:"table"},[s("tr",{staticClass:"pt-4"},[s("th",{staticClass:"pl-0"},[t._v("總計")]),s("td",{staticClass:"text-right pr-0"},[t._v(t._s(t._f("currency")(t.cart.final_total+80)))])])]),s("button",{staticClass:"goCheckOut",on:{click:function(e){return e.preventDefault(),t.goCheckOutFn(e)}}},[t._v("下一步")]),s("div",{staticClass:"coupons"},[s("div",{staticClass:"barcode mt-md-4 mt-2"},[s("img",{attrs:{src:t.barcodeImg,alt:"條碼",ondragstart:"return false;"}})]),0==t.couponSuccess?s("div",{staticClass:"row pl-2 couponsInfo"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"col-11",attrs:{type:"text",placeholder:"輸入折扣碼"},domProps:{value:t.coupon_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCoupons()},input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("button",{staticClass:"applyCoupons col-1",on:{click:function(e){return e.preventDefault(),t.addCoupons()}}},[s("i",{staticClass:"fa fa-arrow-right"})])]):t._e(),1==t.couponSuccess?s("p",{staticClass:"couponCode text-center px-5"},[t._v(t._s(t.coupon_code))]):t._e(),s("span",[1==t.couponSuccess?s("p",{staticClass:"text-success text-center pt-2"},[t._v("已套用優惠券!")]):t._e(),"找不到優惠券!"==t.couponMessage|"優惠券無法使用"==t.couponMessage?s("p",{staticClass:"text-danger text-center pt-2"},[t._v("優惠券輸入錯誤")]):t._e()])])])]):t._e()]),t.cart.carts.length<1?s("div",{staticClass:"main mb-3 mx-auto py-3 col-10"},[s("router-link",{staticClass:"text-center h5 m-0 d-block",attrs:{to:"shop/all"}},[t._v("點我前往購物")])],1):t._e()],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bagTitle text-center"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t._v("品名")]),s("div",{staticClass:"col"},[t._v("尺寸/口味")]),s("div",{staticClass:"col"},[t._v("數量")]),s("div",{staticClass:"col"},[t._v("單價")]),s("div",{staticClass:"col mobNone"},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"title"},[s("thead",[s("th",{staticClass:"pb-5"},[t._v("訂單明細")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{staticClass:"pb-4"},[t._v("運費")]),s("td",{staticClass:"text-right"},[t._v("$80")])])}],o=(s("a4d3"),s("99af"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),n=s("9352"),i=s("0fd1"),r=s("2f62");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,c)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={components:{CheckSchedule:n["a"]},data:function(){return{barcodeImg:i["a"],coupon_code:"",couponSuccess:"",couponMessage:"",status:{loadingItem:""},currentWidth:document.body.clientWidth,swiperOption:{slidesPerView:"auto"}}},methods:u({},Object(r["b"])(["cartItemDelete"]),{},Object(r["b"])("cartsModules",["getCart"]),{addCoupons:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("lovfee","/coupon"),s={code:t.coupon_code};t.$store.dispatch("updateLoading",!0),t.$http.post(e,{data:s}).then((function(e){t.couponSuccess=e.data.success,t.couponMessage=e.data.message,t.getCart(),t.$store.dispatch("updateLoading",!1)}))},goCheckOutFn:function(){var t=this;t.$router.push("/checkInfo"),window.scrollTo({top:0,behavior:"smooth"})},changeCartFn:function(t,e,s,c){var a=this;a.$store.dispatch("updateLoading",!0);var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("lovfee","/cart/").concat(t),n="".concat("https://vue-course-api.hexschool.io","/api/").concat("lovfee","/cart"),i={product_id:e,qty:s,size:c};a.$http.all([a.$http.delete(o),a.$http.post(n,{data:i})]).then(a.$http.spread((function(t,e){a.getCart(),a.$store.dispatch("updateLoading",!1)})))},mergeCart:function(){console.log("merge cart")}}),computed:u({},Object(r["c"])(["isLoading","products"]),{},Object(r["c"])("cartsModules",["cart"]),{slideDeleteFn:function(){return this.currentWidth<=480&&!0}}),created:function(){var t=this;t.getCart(),t.mergeCart()},mounted:function(){var t=this;return(window.onresize=function(){t.currentWidth=document.body.clientWidth})}},p=d,v=(s("4807"),s("2877")),f=Object(v["a"])(p,c,a,!1,null,"75644b49",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-69318a92.ea6d584b.js.map